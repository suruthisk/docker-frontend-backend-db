# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool: MyAgent

stages:
  - stage: Build
    displayName: Build and push docker 
    jobs:
      - job: Build 
        displayName: Build and push image
        steps:
        - task: Docker@2
          inputs:
            containerRegistry: 'docker registry'
            Repository: 'suruthi125/newone'
            command: 'buildAndPush'
            Dockerfile: './frontend/Dockerfile'
        - task: Docker@2
          inputs:
            containerRegistry: 'docker registry'
            command: 'run'
            arguments: '-d  -- name  frontend -p 8080:3000 suruthi125/newone'
  
